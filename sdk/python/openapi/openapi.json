{
  "openapi": "3.1.0",
  "info": {
    "title": "LightningRod API",
    "description": "Generate verified, grounded datasets at scale for LLM fine-tuning and evaluation",
    "version": "1.0.0"
  },
  "servers": [
    {
      "url": "/api/public/v1"
    }
  ],
  "paths": {
    "/openai/chat/completions": {
      "post": {
        "tags": [
          "OpenAI Compatible"
        ],
        "summary": "Chat Completions",
        "description": "OpenAI Compatible API Endpoint for Foresight Models. Does not currently support streaming.",
        "operationId": "chat_completions_openai_chat_completions_post",
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/ChatCompletionRequest"
              }
            }
          },
          "required": true
        },
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ChatCompletionResponse"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        },
        "security": [
          {
            "HTTPBearer": []
          }
        ]
      }
    },
    "/transform-jobs": {
      "post": {
        "tags": [
          "Transform Jobs"
        ],
        "summary": "Create Transform Job",
        "description": "Create a new transform job",
        "operationId": "create_transform_job_transform_jobs_post",
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/CreateTransformJobRequest"
              }
            }
          },
          "required": true
        },
        "responses": {
          "201": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/TransformJob"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        },
        "security": [
          {
            "HTTPBearer": []
          }
        ]
      }
    },
    "/transform-jobs/{job_id}": {
      "get": {
        "tags": [
          "Transform Jobs"
        ],
        "summary": "Get Transform Job",
        "description": "Get a transform job by ID",
        "operationId": "get_transform_job_transform_jobs__job_id__get",
        "security": [
          {
            "HTTPBearer": []
          }
        ],
        "parameters": [
          {
            "name": "job_id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "title": "Job Id"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/TransformJob"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/datasets/{dataset_id}": {
      "get": {
        "tags": [
          "Datasets"
        ],
        "summary": "Get Dataset",
        "description": "Get dataset metadata including ID and row count",
        "operationId": "get_dataset_datasets__dataset_id__get",
        "security": [
          {
            "HTTPBearer": []
          }
        ],
        "parameters": [
          {
            "name": "dataset_id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "title": "Dataset Id"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/DatasetMetadata"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/datasets/{dataset_id}/samples": {
      "get": {
        "tags": [
          "Datasets"
        ],
        "summary": "Get Dataset Samples",
        "description": "Get samples from a dataset with cursor-based pagination",
        "operationId": "get_dataset_samples_datasets__dataset_id__samples_get",
        "security": [
          {
            "HTTPBearer": []
          }
        ],
        "parameters": [
          {
            "name": "dataset_id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "title": "Dataset Id"
            }
          },
          {
            "name": "limit",
            "in": "query",
            "required": false,
            "schema": {
              "type": "integer",
              "maximum": 5000,
              "minimum": 1,
              "default": 1000,
              "title": "Limit"
            }
          },
          {
            "name": "cursor",
            "in": "query",
            "required": false,
            "schema": {
              "anyOf": [
                {
                  "type": "string"
                },
                {
                  "type": "null"
                }
              ],
              "title": "Cursor"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/PaginatedSamplesResponse"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      },
      "post": {
        "tags": [
          "Datasets"
        ],
        "summary": "Upload Samples",
        "description": "Upload samples to a dataset",
        "operationId": "upload_samples_datasets__dataset_id__samples_post",
        "security": [
          {
            "HTTPBearer": []
          }
        ],
        "parameters": [
          {
            "name": "dataset_id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "title": "Dataset Id"
            }
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/UploadSamplesRequest"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/UploadSamplesResponse"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/datasets": {
      "post": {
        "tags": [
          "Datasets"
        ],
        "summary": "Create Dataset",
        "description": "Create a new empty dataset",
        "operationId": "create_dataset_datasets_post",
        "responses": {
          "201": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/CreateDatasetResponse"
                }
              }
            }
          }
        },
        "security": [
          {
            "HTTPBearer": []
          }
        ]
      }
    },
    "/samples/validate": {
      "post": {
        "tags": [
          "Samples"
        ],
        "summary": "Validate Sample",
        "description": "Validate a Sample object structure",
        "operationId": "validate_sample_samples_validate_post",
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/Sample"
              }
            }
          },
          "required": true
        },
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ValidateSampleResponse"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    }
  },
  "components": {
    "schemas": {
      "AnswerType": {
        "properties": {
          "answer_type": {
            "$ref": "#/components/schemas/AnswerTypeEnum",
            "description": "The type of answer expected for this question"
          },
          "answer_format_instruction": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Answer Format Instruction",
            "description": "Instructions describing how the answer should be formatted and given. If not set, uses default based on answer_type."
          },
          "labeler_instruction": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Labeler Instruction",
            "description": "Custom instructions for the labeler. If not set, uses default based on answer_type."
          },
          "question_generation_instruction": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Question Generation Instruction",
            "description": "Custom instructions for generating questions of this type. If not set, uses default based on answer_type."
          }
        },
        "type": "object",
        "required": [
          "answer_type"
        ],
        "title": "AnswerType"
      },
      "AnswerTypeEnum": {
        "type": "string",
        "enum": [
          "BINARY",
          "MULTIPLE_CHOICE",
          "CONTINUOUS",
          "FREE_RESPONSE"
        ],
        "title": "AnswerTypeEnum"
      },
      "ChatCompletionRequest": {
        "properties": {
          "model": {
            "type": "string",
            "title": "Model",
            "description": "ID of the model to use"
          },
          "messages": {
            "items": {
              "$ref": "#/components/schemas/ChatMessage"
            },
            "type": "array",
            "title": "Messages",
            "description": "A list of messages comprising the conversation so far"
          },
          "temperature": {
            "anyOf": [
              {
                "type": "number"
              },
              {
                "type": "null"
              }
            ],
            "title": "Temperature",
            "description": "Sampling temperature between 0 and 2"
          },
          "max_tokens": {
            "anyOf": [
              {
                "type": "integer"
              },
              {
                "type": "null"
              }
            ],
            "title": "Max Tokens",
            "description": "Maximum number of tokens to generate"
          },
          "top_p": {
            "anyOf": [
              {
                "type": "number"
              },
              {
                "type": "null"
              }
            ],
            "title": "Top P",
            "description": "Nucleus sampling parameter"
          },
          "stream": {
            "anyOf": [
              {
                "type": "boolean"
              },
              {
                "type": "null"
              }
            ],
            "title": "Stream",
            "description": "Whether to stream back partial progress",
            "default": false
          },
          "n": {
            "anyOf": [
              {
                "type": "integer"
              },
              {
                "type": "null"
              }
            ],
            "title": "N",
            "description": "Number of chat completion choices to generate",
            "default": 1
          },
          "stop": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "items": {
                  "type": "string"
                },
                "type": "array"
              },
              {
                "type": "null"
              }
            ],
            "title": "Stop",
            "description": "Up to 4 sequences where the API will stop generating"
          }
        },
        "type": "object",
        "required": [
          "model",
          "messages"
        ],
        "title": "ChatCompletionRequest",
        "examples": [
          {
            "messages": [
              {
                "content": "Will Bitcoin increase by more than 10% over the next 3 months? Answer as a probability between 0 and 1 between <answer></answer> tags.",
                "role": "user"
              }
            ],
            "model": "LightningRodLabs/foresight-v1"
          }
        ]
      },
      "ChatCompletionResponse": {
        "properties": {
          "id": {
            "type": "string",
            "title": "Id",
            "description": "A unique identifier for the chat completion"
          },
          "object": {
            "type": "string",
            "const": "chat.completion",
            "title": "Object",
            "description": "The object type",
            "default": "chat.completion"
          },
          "created": {
            "type": "integer",
            "title": "Created",
            "description": "Unix timestamp of when the completion was created"
          },
          "model": {
            "type": "string",
            "title": "Model",
            "description": "The model used for the chat completion"
          },
          "choices": {
            "items": {
              "$ref": "#/components/schemas/Choice"
            },
            "type": "array",
            "title": "Choices",
            "description": "A list of chat completion choices"
          },
          "usage": {
            "anyOf": [
              {
                "$ref": "#/components/schemas/Usage"
              },
              {
                "type": "null"
              }
            ],
            "description": "Usage statistics for the completion request"
          }
        },
        "type": "object",
        "required": [
          "id",
          "created",
          "model",
          "choices"
        ],
        "title": "ChatCompletionResponse"
      },
      "ChatMessage": {
        "properties": {
          "role": {
            "type": "string",
            "title": "Role",
            "description": "The role of the message author (system, user, or assistant)"
          },
          "content": {
            "type": "string",
            "title": "Content",
            "description": "The content of the message"
          }
        },
        "type": "object",
        "required": [
          "role",
          "content"
        ],
        "title": "ChatMessage",
        "examples": [
          {
            "content": "Will the S&P 500 close above 6000 by the end of 2025?",
            "role": "user"
          }
        ]
      },
      "Choice": {
        "properties": {
          "index": {
            "type": "integer",
            "title": "Index",
            "description": "The index of this choice"
          },
          "message": {
            "$ref": "#/components/schemas/ResponseMessage",
            "description": "The message generated by the model"
          },
          "finish_reason": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Finish Reason",
            "description": "The reason the model stopped generating tokens"
          }
        },
        "type": "object",
        "required": [
          "index",
          "message"
        ],
        "title": "Choice"
      },
      "CreateDatasetResponse": {
        "properties": {
          "id": {
            "type": "string",
            "title": "Id"
          }
        },
        "type": "object",
        "required": [
          "id"
        ],
        "title": "CreateDatasetResponse"
      },
      "CreateTransformConfig": {
        "oneOf": [
          {
            "$ref": "#/components/schemas/ForwardLookingQuestionGenerator"
          },
          {
            "$ref": "#/components/schemas/GdeltSeedGenerator"
          },
          {
            "$ref": "#/components/schemas/NewsSeedGenerator"
          },
          {
            "$ref": "#/components/schemas/QuestionAndLabelGenerator"
          },
          {
            "$ref": "#/components/schemas/QuestionGenerator"
          },
          {
            "$ref": "#/components/schemas/QuestionPipeline"
          },
          {
            "$ref": "#/components/schemas/QuestionRenderer"
          },
          {
            "$ref": "#/components/schemas/WebSearchLabeler"
          }
        ],
        "discriminator": {
          "propertyName": "config_type",
          "mapping": {
            "FORWARD_LOOKING_QUESTION_GENERATOR": "#/components/schemas/ForwardLookingQuestionGenerator",
            "GDELT_SEED_GENERATOR": "#/components/schemas/GdeltSeedGenerator",
            "NEWS_SEED_GENERATOR": "#/components/schemas/NewsSeedGenerator",
            "QUESTION_AND_LABEL_GENERATOR": "#/components/schemas/QuestionAndLabelGenerator",
            "QUESTION_GENERATOR": "#/components/schemas/QuestionGenerator",
            "QUESTION_PIPELINE": "#/components/schemas/QuestionPipeline",
            "QUESTION_RENDERER": "#/components/schemas/QuestionRenderer",
            "WEB_SEARCH_LABELER": "#/components/schemas/WebSearchLabeler"
          }
        }
      },
      "CreateTransformJobRequest": {
        "properties": {
          "config": {
            "$ref": "#/components/schemas/CreateTransformConfig"
          },
          "input_dataset_id": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Input Dataset Id"
          },
          "max_seeds": {
            "anyOf": [
              {
                "type": "integer"
              },
              {
                "type": "null"
              }
            ],
            "title": "Max Seeds"
          }
        },
        "type": "object",
        "required": [
          "config"
        ],
        "title": "CreateTransformJobRequest"
      },
      "DatasetMetadata": {
        "properties": {
          "id": {
            "type": "string",
            "title": "Id"
          },
          "num_rows": {
            "type": "integer",
            "title": "Num Rows"
          }
        },
        "type": "object",
        "required": [
          "id",
          "num_rows"
        ],
        "title": "DatasetMetadata"
      },
      "FilterCriteria": {
        "properties": {
          "rubric": {
            "type": "string",
            "title": "Rubric",
            "description": "Scoring rubric/prompt for evaluating content"
          },
          "min_score": {
            "type": "number",
            "maximum": 1.0,
            "minimum": 0.0,
            "title": "Min Score",
            "description": "Minimum score threshold",
            "default": 0.5
          },
          "model_name": {
            "type": "string",
            "title": "Model Name",
            "description": "Name of the model (in openrouter) to use for scoring",
            "default": "google/gemini-3-flash-preview"
          }
        },
        "type": "object",
        "required": [
          "rubric"
        ],
        "title": "FilterCriteria",
        "description": "Reusable filter criteria for LLM-based content scoring and filtering."
      },
      "ForwardLookingQuestion": {
        "properties": {
          "question_type": {
            "type": "string",
            "const": "FORWARD_LOOKING_QUESTION",
            "title": "Question Type",
            "default": "FORWARD_LOOKING_QUESTION"
          },
          "question_text": {
            "type": "string",
            "title": "Question Text"
          },
          "date_close": {
            "type": "string",
            "format": "date-time",
            "title": "Date Close"
          },
          "event_date": {
            "type": "string",
            "format": "date-time",
            "title": "Event Date"
          },
          "resolution_criteria": {
            "type": "string",
            "title": "Resolution Criteria"
          },
          "prediction_date": {
            "anyOf": [
              {
                "type": "string",
                "format": "date-time"
              },
              {
                "type": "null"
              }
            ],
            "title": "Prediction Date"
          }
        },
        "type": "object",
        "required": [
          "question_text",
          "date_close",
          "event_date",
          "resolution_criteria"
        ],
        "title": "ForwardLookingQuestion"
      },
      "ForwardLookingQuestionGenerator": {
        "properties": {
          "config_type": {
            "type": "string",
            "const": "FORWARD_LOOKING_QUESTION_GENERATOR",
            "title": "Config Type",
            "description": "Type of transform configuration",
            "default": "FORWARD_LOOKING_QUESTION_GENERATOR"
          },
          "instructions": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Instructions",
            "description": "Instructions for question generation. If not provided, uses sensible defaults."
          },
          "examples": {
            "items": {
              "type": "string"
            },
            "type": "array",
            "title": "Examples",
            "description": "Example questions to guide generation"
          },
          "bad_examples": {
            "items": {
              "type": "string"
            },
            "type": "array",
            "title": "Bad Examples",
            "description": "Examples of questions to avoid"
          },
          "filter": {
            "anyOf": [
              {
                "$ref": "#/components/schemas/FilterCriteria"
              },
              {
                "items": {
                  "$ref": "#/components/schemas/FilterCriteria"
                },
                "type": "array"
              },
              {
                "type": "null"
              }
            ],
            "title": "Filter",
            "description": "Optional filter criteria to apply after question generation"
          },
          "questions_per_seed": {
            "type": "integer",
            "title": "Questions Per Seed",
            "description": "Number of questions to generate per seed",
            "default": 1
          },
          "include_default_filter": {
            "type": "boolean",
            "title": "Include Default Filter",
            "description": "Whether to include the default filter for generated questions",
            "default": false
          },
          "answer_type": {
            "anyOf": [
              {
                "$ref": "#/components/schemas/AnswerType"
              },
              {
                "type": "null"
              }
            ],
            "description": "The type of answer expected for generated questions"
          }
        },
        "type": "object",
        "title": "ForwardLookingQuestionGenerator"
      },
      "GdeltSeedGenerator": {
        "properties": {
          "config_type": {
            "type": "string",
            "const": "GDELT_SEED_GENERATOR",
            "title": "Config Type",
            "description": "Type of transform configuration",
            "default": "GDELT_SEED_GENERATOR"
          },
          "start_date": {
            "type": "string",
            "format": "date-time",
            "title": "Start Date",
            "description": "Start date for seed search"
          },
          "end_date": {
            "type": "string",
            "format": "date-time",
            "title": "End Date",
            "description": "End date for seed search"
          },
          "interval_duration_days": {
            "type": "integer",
            "title": "Interval Duration Days",
            "description": "Duration of each interval in days"
          },
          "max_count": {
            "anyOf": [
              {
                "type": "integer"
              },
              {
                "type": "null"
              }
            ],
            "title": "Max Count",
            "description": "Maximum number of seeds to generate. If None, process all intervals concurrently"
          },
          "concurrency_limit": {
            "type": "integer",
            "title": "Concurrency Limit",
            "description": "Maximum number of concurrent intervals when max_count is None",
            "default": 5
          },
          "articles_per_interval": {
            "type": "integer",
            "title": "Articles Per Interval",
            "description": "Number of articles to fetch per interval from BigQuery",
            "default": 1000
          },
          "scrape_concurrency_limit": {
            "type": "integer",
            "title": "Scrape Concurrency Limit",
            "description": "Maximum number of concurrent scraping requests",
            "default": 50
          }
        },
        "type": "object",
        "required": [
          "start_date",
          "end_date",
          "interval_duration_days"
        ],
        "title": "GdeltSeedGenerator"
      },
      "HTTPValidationError": {
        "properties": {
          "detail": {
            "items": {
              "$ref": "#/components/schemas/ValidationError"
            },
            "type": "array",
            "title": "Detail"
          }
        },
        "type": "object",
        "title": "HTTPValidationError"
      },
      "Label": {
        "properties": {
          "label": {
            "type": "string",
            "title": "Label"
          },
          "label_confidence": {
            "type": "number",
            "title": "Label Confidence"
          },
          "resolution_date": {
            "anyOf": [
              {
                "type": "string",
                "format": "date-time"
              },
              {
                "type": "null"
              }
            ],
            "title": "Resolution Date"
          },
          "reasoning": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Reasoning"
          },
          "answer_sources": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Answer Sources"
          }
        },
        "type": "object",
        "required": [
          "label",
          "label_confidence"
        ],
        "title": "Label"
      },
      "ModelConfig": {
        "properties": {
          "model_name": {
            "type": "string",
            "title": "Model Name",
            "default": "meta-llama/llama-3.3-70b-instruct"
          },
          "model_source": {
            "$ref": "#/components/schemas/ModelSourceType",
            "default": "OPEN_ROUTER"
          },
          "temperature": {
            "type": "number",
            "title": "Temperature",
            "default": 1.0
          },
          "max_tokens": {
            "anyOf": [
              {
                "type": "integer"
              },
              {
                "type": "null"
              }
            ],
            "title": "Max Tokens"
          },
          "ip_address": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Ip Address"
          },
          "lora_base_model_name": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Lora Base Model Name"
          },
          "lora_repo_path": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Lora Repo Path"
          },
          "lora_checkpoint_path": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Lora Checkpoint Path"
          },
          "runpod_endpoint_id": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Runpod Endpoint Id"
          },
          "is_lightningrod_model": {
            "anyOf": [
              {
                "type": "boolean"
              },
              {
                "type": "null"
              }
            ],
            "title": "Is Lightningrod Model"
          },
          "openrouter_provider": {
            "anyOf": [
              {
                "items": {
                  "type": "string"
                },
                "type": "array"
              },
              {
                "type": "null"
              }
            ],
            "title": "Openrouter Provider"
          },
          "reasoning_effort": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Reasoning Effort"
          },
          "is_reasoning_model": {
            "anyOf": [
              {
                "type": "boolean"
              },
              {
                "type": "null"
              }
            ],
            "title": "Is Reasoning Model"
          },
          "disable_reasoning": {
            "type": "boolean",
            "title": "Disable Reasoning",
            "default": false
          },
          "use_pipeline_key": {
            "type": "boolean",
            "title": "Use Pipeline Key",
            "default": false
          }
        },
        "type": "object",
        "title": "ModelConfig"
      },
      "ModelSourceType": {
        "type": "string",
        "enum": [
          "OPENAI",
          "VLLM",
          "OPEN_ROUTER",
          "HUGGINGFACE_ENDPOINTS",
          "DEEPSEEK",
          "DEEPINFRA",
          "RUNPOD",
          "SGLANG"
        ],
        "title": "ModelSourceType"
      },
      "NewsContext": {
        "properties": {
          "context_type": {
            "type": "string",
            "const": "NEWS_CONTEXT",
            "title": "Context Type",
            "default": "NEWS_CONTEXT"
          },
          "rendered_context": {
            "type": "string",
            "title": "Rendered Context"
          },
          "search_query": {
            "type": "string",
            "title": "Search Query"
          }
        },
        "type": "object",
        "required": [
          "rendered_context",
          "search_query"
        ],
        "title": "NewsContext"
      },
      "NewsContextGenerator": {
        "properties": {
          "config_type": {
            "type": "string",
            "const": "NEWS_CONTEXT_GENERATOR",
            "title": "Config Type",
            "description": "Type of transform configuration",
            "default": "NEWS_CONTEXT_GENERATOR"
          },
          "num_search_queries": {
            "type": "integer",
            "title": "Num Search Queries",
            "description": "Number of search queries to generate per question",
            "default": 5
          },
          "articles_per_query": {
            "type": "integer",
            "title": "Articles Per Query",
            "description": "Number of news articles to return per search query",
            "default": 5
          },
          "num_articles": {
            "type": "integer",
            "title": "Num Articles",
            "description": "Maximum number of news articles to include in final output",
            "default": 10
          },
          "relevance_threshold": {
            "type": "integer",
            "title": "Relevance Threshold",
            "description": "Minimum relevance rating (1-6 scale) to include article",
            "default": 2
          },
          "min_articles": {
            "type": "integer",
            "title": "Min Articles",
            "description": "Minimum number of articles to ensure",
            "default": 6
          },
          "time_delta_days": {
            "type": "integer",
            "title": "Time Delta Days",
            "description": "Number of days to look back for news articles",
            "default": 30
          },
          "concurrency_limit": {
            "type": "integer",
            "title": "Concurrency Limit",
            "description": "Maximum number of concurrent tasks",
            "default": 50
          },
          "enable_relevance_ranking": {
            "type": "boolean",
            "title": "Enable Relevance Ranking",
            "description": "Whether to perform LLM-based relevance ranking",
            "default": true
          }
        },
        "type": "object",
        "title": "NewsContextGenerator"
      },
      "NewsSeedGenerator": {
        "properties": {
          "config_type": {
            "type": "string",
            "const": "NEWS_SEED_GENERATOR",
            "title": "Config Type",
            "description": "Type of transform configuration",
            "default": "NEWS_SEED_GENERATOR"
          },
          "start_date": {
            "type": "string",
            "format": "date-time",
            "title": "Start Date",
            "description": "Start date for seed search"
          },
          "end_date": {
            "type": "string",
            "format": "date-time",
            "title": "End Date",
            "description": "End date for seed search"
          },
          "interval_duration_days": {
            "type": "integer",
            "title": "Interval Duration Days",
            "description": "Duration of each interval in days"
          },
          "max_count": {
            "anyOf": [
              {
                "type": "integer"
              },
              {
                "type": "null"
              }
            ],
            "title": "Max Count",
            "description": "Maximum number of seeds to generate. If None, process all intervals concurrently"
          },
          "concurrency_limit": {
            "type": "integer",
            "title": "Concurrency Limit",
            "description": "Maximum number of concurrent intervals when max_count is None",
            "default": 5
          },
          "search_query": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "items": {
                  "type": "string"
                },
                "type": "array"
              }
            ],
            "title": "Search Query",
            "description": "Search query for news articles. If multiple queries are provided, a separate search will be done for each query."
          },
          "articles_per_search": {
            "type": "integer",
            "title": "Articles Per Search",
            "description": "Number of articles to fetch per search (max 100). Each query/domain combination is a separate search.",
            "default": 10
          },
          "filter_criteria": {
            "anyOf": [
              {
                "$ref": "#/components/schemas/FilterCriteria"
              },
              {
                "items": {
                  "$ref": "#/components/schemas/FilterCriteria"
                },
                "type": "array"
              },
              {
                "type": "null"
              }
            ],
            "title": "Filter Criteria",
            "description": "Optional criteria for filtering news snippets before scraping"
          },
          "source_domain": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "items": {
                  "type": "string"
                },
                "type": "array"
              },
              {
                "type": "null"
              }
            ],
            "title": "Source Domain",
            "description": "Optional URL source of the news articles, e.g. 'https://reuters.com/business', if multiple sources are provided, multiple searchers will be done for each interval"
          }
        },
        "type": "object",
        "required": [
          "start_date",
          "end_date",
          "interval_duration_days",
          "search_query"
        ],
        "title": "NewsSeedGenerator"
      },
      "PaginatedSamplesResponse": {
        "properties": {
          "samples": {
            "items": {
              "$ref": "#/components/schemas/Sample"
            },
            "type": "array",
            "title": "Samples"
          },
          "next_cursor": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Next Cursor"
          },
          "has_more": {
            "type": "boolean",
            "title": "Has More"
          },
          "total": {
            "type": "integer",
            "title": "Total"
          }
        },
        "type": "object",
        "required": [
          "samples",
          "has_more",
          "total"
        ],
        "title": "PaginatedSamplesResponse"
      },
      "Question": {
        "properties": {
          "question_type": {
            "type": "string",
            "const": "QUESTION",
            "title": "Question Type",
            "default": "QUESTION"
          },
          "question_text": {
            "type": "string",
            "title": "Question Text"
          }
        },
        "type": "object",
        "required": [
          "question_text"
        ],
        "title": "Question"
      },
      "QuestionAndLabelGenerator": {
        "properties": {
          "config_type": {
            "type": "string",
            "const": "QUESTION_AND_LABEL_GENERATOR",
            "title": "Config Type",
            "description": "Type of transform configuration",
            "default": "QUESTION_AND_LABEL_GENERATOR"
          },
          "instructions": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Instructions",
            "description": "Instructions for question generation. If not provided, uses sensible defaults."
          },
          "examples": {
            "items": {
              "type": "string"
            },
            "type": "array",
            "title": "Examples",
            "description": "Example questions to guide generation"
          },
          "bad_examples": {
            "items": {
              "type": "string"
            },
            "type": "array",
            "title": "Bad Examples",
            "description": "Examples of questions to avoid"
          },
          "filter": {
            "anyOf": [
              {
                "$ref": "#/components/schemas/FilterCriteria"
              },
              {
                "items": {
                  "$ref": "#/components/schemas/FilterCriteria"
                },
                "type": "array"
              },
              {
                "type": "null"
              }
            ],
            "title": "Filter",
            "description": "Optional filter criteria to apply after question generation"
          },
          "questions_per_seed": {
            "type": "integer",
            "title": "Questions Per Seed",
            "description": "Number of questions to generate per seed",
            "default": 1
          },
          "include_default_filter": {
            "type": "boolean",
            "title": "Include Default Filter",
            "description": "Whether to include the default filter for generated questions",
            "default": false
          },
          "answer_type": {
            "anyOf": [
              {
                "$ref": "#/components/schemas/AnswerType"
              },
              {
                "type": "null"
              }
            ],
            "description": "The type of answer expected for generated questions"
          }
        },
        "type": "object",
        "title": "QuestionAndLabelGenerator"
      },
      "QuestionGenerator": {
        "properties": {
          "config_type": {
            "type": "string",
            "const": "QUESTION_GENERATOR",
            "title": "Config Type",
            "description": "Type of transform configuration",
            "default": "QUESTION_GENERATOR"
          },
          "instructions": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Instructions",
            "description": "Instructions for question generation. If not provided, uses sensible defaults."
          },
          "examples": {
            "items": {
              "type": "string"
            },
            "type": "array",
            "title": "Examples",
            "description": "Example questions to guide generation"
          },
          "bad_examples": {
            "items": {
              "type": "string"
            },
            "type": "array",
            "title": "Bad Examples",
            "description": "Examples of questions to avoid"
          },
          "filter": {
            "anyOf": [
              {
                "$ref": "#/components/schemas/FilterCriteria"
              },
              {
                "items": {
                  "$ref": "#/components/schemas/FilterCriteria"
                },
                "type": "array"
              },
              {
                "type": "null"
              }
            ],
            "title": "Filter",
            "description": "Optional filter criteria to apply after question generation"
          },
          "questions_per_seed": {
            "type": "integer",
            "title": "Questions Per Seed",
            "description": "Number of questions to generate per seed",
            "default": 1
          },
          "include_default_filter": {
            "type": "boolean",
            "title": "Include Default Filter",
            "description": "Whether to include the default filter for generated questions",
            "default": false
          },
          "answer_type": {
            "anyOf": [
              {
                "$ref": "#/components/schemas/AnswerType"
              },
              {
                "type": "null"
              }
            ],
            "description": "The type of answer expected for generated questions"
          }
        },
        "type": "object",
        "title": "QuestionGenerator"
      },
      "QuestionPipeline": {
        "properties": {
          "config_type": {
            "type": "string",
            "const": "QUESTION_PIPELINE",
            "title": "Config Type",
            "description": "Type of transform configuration",
            "default": "QUESTION_PIPELINE"
          },
          "seed_generator": {
            "oneOf": [
              {
                "$ref": "#/components/schemas/NewsSeedGenerator"
              },
              {
                "$ref": "#/components/schemas/GdeltSeedGenerator"
              }
            ],
            "title": "Seed Generator",
            "description": "Configuration for seed generation",
            "discriminator": {
              "propertyName": "config_type",
              "mapping": {
                "GDELT_SEED_GENERATOR": "#/components/schemas/GdeltSeedGenerator",
                "NEWS_SEED_GENERATOR": "#/components/schemas/NewsSeedGenerator"
              }
            }
          },
          "question_generator": {
            "oneOf": [
              {
                "$ref": "#/components/schemas/QuestionGenerator"
              },
              {
                "$ref": "#/components/schemas/ForwardLookingQuestionGenerator"
              },
              {
                "$ref": "#/components/schemas/QuestionAndLabelGenerator"
              }
            ],
            "title": "Question Generator",
            "description": "Configuration for question generation",
            "discriminator": {
              "propertyName": "config_type",
              "mapping": {
                "FORWARD_LOOKING_QUESTION_GENERATOR": "#/components/schemas/ForwardLookingQuestionGenerator",
                "QUESTION_AND_LABEL_GENERATOR": "#/components/schemas/QuestionAndLabelGenerator",
                "QUESTION_GENERATOR": "#/components/schemas/QuestionGenerator"
              }
            }
          },
          "labeler": {
            "anyOf": [
              {
                "$ref": "#/components/schemas/WebSearchLabeler"
              },
              {
                "type": "null"
              }
            ],
            "description": "Configuration for labeling. Not needed when using QuestionAndLabelGenerator."
          },
          "context_generators": {
            "anyOf": [
              {
                "items": {
                  "$ref": "#/components/schemas/NewsContextGenerator"
                },
                "type": "array"
              },
              {
                "type": "null"
              }
            ],
            "title": "Context Generators",
            "description": "Optional list of context generators to run before rendering"
          },
          "renderer": {
            "anyOf": [
              {
                "$ref": "#/components/schemas/QuestionRenderer"
              },
              {
                "type": "null"
              }
            ],
            "description": "Optional configuration for rendering the final prompt"
          },
          "rollout_generator": {
            "anyOf": [
              {
                "$ref": "#/components/schemas/RolloutGenerator"
              },
              {
                "type": "null"
              }
            ],
            "description": "Optional configuration for generating rollouts from multiple models"
          }
        },
        "type": "object",
        "required": [
          "seed_generator",
          "question_generator"
        ],
        "title": "QuestionPipeline"
      },
      "QuestionRenderer": {
        "properties": {
          "config_type": {
            "type": "string",
            "const": "QUESTION_RENDERER",
            "title": "Config Type",
            "description": "Type of transform configuration",
            "default": "QUESTION_RENDERER"
          },
          "template": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Template",
            "description": "Custom template for rendering the prompt. If not provided, dynamically builds based on available content. Supports placeholders like {question_text}, {context}, {answer_instructions}."
          },
          "answer_type": {
            "anyOf": [
              {
                "$ref": "#/components/schemas/AnswerType"
              },
              {
                "type": "null"
              }
            ],
            "description": "The type of answer expected, used to render answer instructions"
          }
        },
        "type": "object",
        "title": "QuestionRenderer"
      },
      "RAGContext": {
        "properties": {
          "context_type": {
            "type": "string",
            "const": "RAG_CONTEXT",
            "title": "Context Type",
            "default": "RAG_CONTEXT"
          },
          "rendered_context": {
            "type": "string",
            "title": "Rendered Context"
          },
          "document_id": {
            "type": "string",
            "title": "Document Id"
          }
        },
        "type": "object",
        "required": [
          "rendered_context",
          "document_id"
        ],
        "title": "RAGContext"
      },
      "ResponseMessage": {
        "properties": {
          "role": {
            "type": "string",
            "title": "Role",
            "description": "The role of the message author"
          },
          "content": {
            "type": "string",
            "title": "Content",
            "description": "The content of the message"
          }
        },
        "type": "object",
        "required": [
          "role",
          "content"
        ],
        "title": "ResponseMessage"
      },
      "RolloutGenerator": {
        "properties": {
          "config_type": {
            "type": "string",
            "const": "ROLLOUT_GENERATOR",
            "title": "Config Type",
            "default": "ROLLOUT_GENERATOR"
          },
          "models": {
            "items": {
              "$ref": "#/components/schemas/ModelConfig"
            },
            "type": "array",
            "title": "Models",
            "description": "Model names or ModelConfig objects"
          },
          "prompt_template": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Prompt Template",
            "description": "Prompt template with {column} placeholders. If None, uses sample.prompt"
          },
          "input_columns": {
            "items": {
              "type": "string"
            },
            "type": "array",
            "title": "Input Columns",
            "description": "Columns to substitute into template (from meta)"
          },
          "output_schema": {
            "anyOf": [
              {},
              {
                "type": "null"
              }
            ],
            "title": "Output Schema",
            "description": "Pydantic model for structured output"
          },
          "concurrency_limit": {
            "type": "integer",
            "title": "Concurrency Limit",
            "description": "Maximum number of concurrent rollout tasks",
            "default": 50
          }
        },
        "type": "object",
        "required": [
          "models"
        ],
        "title": "RolloutGenerator"
      },
      "Sample": {
        "properties": {
          "seed": {
            "anyOf": [
              {
                "$ref": "#/components/schemas/Seed"
              },
              {
                "type": "null"
              }
            ]
          },
          "question": {
            "anyOf": [
              {
                "oneOf": [
                  {
                    "$ref": "#/components/schemas/ForwardLookingQuestion"
                  },
                  {
                    "$ref": "#/components/schemas/Question"
                  }
                ],
                "discriminator": {
                  "propertyName": "question_type",
                  "mapping": {
                    "FORWARD_LOOKING_QUESTION": "#/components/schemas/ForwardLookingQuestion",
                    "QUESTION": "#/components/schemas/Question"
                  }
                }
              },
              {
                "type": "null"
              }
            ],
            "title": "Question"
          },
          "label": {
            "anyOf": [
              {
                "$ref": "#/components/schemas/Label"
              },
              {
                "type": "null"
              }
            ]
          },
          "prompt": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Prompt"
          },
          "context": {
            "anyOf": [
              {
                "items": {
                  "oneOf": [
                    {
                      "$ref": "#/components/schemas/NewsContext"
                    },
                    {
                      "$ref": "#/components/schemas/RAGContext"
                    }
                  ],
                  "discriminator": {
                    "propertyName": "context_type",
                    "mapping": {
                      "NEWS_CONTEXT": "#/components/schemas/NewsContext",
                      "RAG_CONTEXT": "#/components/schemas/RAGContext"
                    }
                  }
                },
                "type": "array"
              },
              {
                "type": "null"
              }
            ],
            "title": "Context"
          },
          "meta": {
            "additionalProperties": true,
            "type": "object",
            "title": "Meta",
            "default": {}
          },
          "is_valid": {
            "type": "boolean",
            "title": "Is Valid",
            "default": true
          }
        },
        "type": "object",
        "title": "Sample"
      },
      "Seed": {
        "properties": {
          "seed_text": {
            "type": "string",
            "title": "Seed Text"
          },
          "url": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Url"
          },
          "seed_creation_date": {
            "anyOf": [
              {
                "type": "string",
                "format": "date-time"
              },
              {
                "type": "null"
              }
            ],
            "title": "Seed Creation Date"
          },
          "search_query": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Search Query"
          }
        },
        "type": "object",
        "required": [
          "seed_text"
        ],
        "title": "Seed"
      },
      "TransformJob": {
        "properties": {
          "id": {
            "type": "string",
            "title": "Id"
          },
          "organization_id": {
            "type": "string",
            "title": "Organization Id"
          },
          "status": {
            "$ref": "#/components/schemas/TransformJobStatus"
          },
          "modal_function_call_id": {
            "type": "string",
            "title": "Modal Function Call Id"
          },
          "modal_app_id": {
            "type": "string",
            "title": "Modal App Id"
          },
          "transform_config": {
            "type": "string",
            "title": "Transform Config"
          },
          "input_dataset_id": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Input Dataset Id"
          },
          "output_dataset_id": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Output Dataset Id"
          },
          "created_at": {
            "type": "string",
            "format": "date-time",
            "title": "Created At"
          },
          "updated_at": {
            "type": "string",
            "format": "date-time",
            "title": "Updated At"
          }
        },
        "type": "object",
        "required": [
          "id",
          "organization_id",
          "status",
          "modal_function_call_id",
          "modal_app_id",
          "transform_config",
          "input_dataset_id",
          "output_dataset_id",
          "created_at",
          "updated_at"
        ],
        "title": "TransformJob"
      },
      "TransformJobStatus": {
        "type": "string",
        "enum": [
          "RUNNING",
          "COMPLETED",
          "FAILED"
        ],
        "title": "TransformJobStatus"
      },
      "UploadSamplesRequest": {
        "properties": {
          "samples": {
            "items": {
              "$ref": "#/components/schemas/Sample"
            },
            "type": "array",
            "title": "Samples"
          }
        },
        "type": "object",
        "required": [
          "samples"
        ],
        "title": "UploadSamplesRequest"
      },
      "UploadSamplesResponse": {
        "properties": {
          "count": {
            "type": "integer",
            "title": "Count"
          },
          "total": {
            "type": "integer",
            "title": "Total"
          }
        },
        "type": "object",
        "required": [
          "count",
          "total"
        ],
        "title": "UploadSamplesResponse"
      },
      "Usage": {
        "properties": {
          "prompt_tokens": {
            "type": "integer",
            "title": "Prompt Tokens",
            "description": "Number of tokens in the prompt"
          },
          "completion_tokens": {
            "type": "integer",
            "title": "Completion Tokens",
            "description": "Number of tokens in the completion"
          },
          "total_tokens": {
            "type": "integer",
            "title": "Total Tokens",
            "description": "Total number of tokens used"
          }
        },
        "type": "object",
        "required": [
          "prompt_tokens",
          "completion_tokens",
          "total_tokens"
        ],
        "title": "Usage"
      },
      "ValidateSampleResponse": {
        "properties": {
          "valid": {
            "type": "boolean",
            "title": "Valid"
          },
          "message": {
            "type": "string",
            "title": "Message"
          }
        },
        "type": "object",
        "required": [
          "valid",
          "message"
        ],
        "title": "ValidateSampleResponse"
      },
      "ValidationError": {
        "properties": {
          "loc": {
            "items": {
              "anyOf": [
                {
                  "type": "string"
                },
                {
                  "type": "integer"
                }
              ]
            },
            "type": "array",
            "title": "Location"
          },
          "msg": {
            "type": "string",
            "title": "Message"
          },
          "type": {
            "type": "string",
            "title": "Error Type"
          }
        },
        "type": "object",
        "required": [
          "loc",
          "msg",
          "type"
        ],
        "title": "ValidationError"
      },
      "WebSearchLabeler": {
        "properties": {
          "config_type": {
            "type": "string",
            "const": "WEB_SEARCH_LABELER",
            "title": "Config Type",
            "description": "Type of transform configuration",
            "default": "WEB_SEARCH_LABELER"
          },
          "confidence_threshold": {
            "type": "number",
            "title": "Confidence Threshold",
            "description": "Minimum confidence threshold for including questions",
            "default": 0.9
          },
          "concurrency_limit": {
            "type": "integer",
            "title": "Concurrency Limit",
            "description": "Maximum number of concurrent question processing tasks",
            "default": 50
          },
          "answer_type": {
            "anyOf": [
              {
                "$ref": "#/components/schemas/AnswerType"
              },
              {
                "type": "null"
              }
            ],
            "description": "The type of answer expected, used to guide the labeler"
          }
        },
        "type": "object",
        "title": "WebSearchLabeler"
      }
    },
    "securitySchemes": {
      "HTTPBearer": {
        "type": "http",
        "scheme": "bearer"
      }
    }
  }
}